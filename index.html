<html>
  <head>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600&display=swap" rel="stylesheet">
    <style>
      /* Page background*/
      body {
        margin: 0;
        background: radial-gradient(circle at top, #fdf7f2 0%, #f5f3f0 40%, #eee9e3 100%);
      }

      .sidebar-card {
        background: #ffffff;
        border-radius: 12px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.12);
        padding: 14px;
      }

      .panel-reset {
        background: transparent !important;
        border: 0 !important;
        border-radius: 0 !important;
        padding: 0 !important;
        box-shadow: none !important;
      }

      #canvasdiv {
        border: 1px solid #d9d9d9 !important;
        border-radius: 8px !important;
        background: #fafafa !important;
      }

      #zoomToolbar { white-space: nowrap; }
      
    </style>
  </head>

<div style="position: absolute;
            top: 3vh;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Poppins', sans-serif;
            font-size: 6vh;        /* Bigger title */
            font-weight: 700;
            letter-spacing: 0.15vh;">
      <span style="color:#E76F51;">W</span>
      <span style="color:#457B9D;">e</span>
      <span style="color:#A89BD8;">C</span>
      <span style="color:#F4A261;">o</span>
      <span style="color:#84C69B;">l</span>
      <span style="color:#F2E9B3;">o</span>
      <span style="color:#E0E1DD;">r</span>
</div>

<!-- User status bar (login info + admin button) -->
<div id="userBar"
     style="position: absolute;
            top: calc(12.5vh + 75vh + 2vh);
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 1.4vh;
            color: #333;">
  <span id="currentUserDisplay"></span>

  <button id="logoutBtn"
          style="display:none;
                 padding:4px 10px;
                 border-radius: 999px;
                 border:1px solid #d9d9d9;
                 background:#f6f6f6;
                 cursor:pointer;">
    Log out
  </button>

  <button id="clearCanvasBtn"
          style="display:none;
                 padding:4px 10px;
                 border-radius: 999px;
                 border:1px solid #e76f51;
                 background:#fff4ef;
                 color:#e76f51;
                 cursor:pointer;">
    Clear Canvas (Admin)
  </button>
</div>

    <div id="canvasdiv"
         onmouseup="placePixel(event, false)"
         onmousedown="placePixel(event, true)"
         onmouseover="getPixelPlacePos(event)"
         style="border-width: 1px; border-style: solid; border-color: red; width: 75vh; height: 75vh; margin-left: calc(50vw - 37.5vh); margin-top: 12.5vh; position: absolute;">
        <canvas
          id="canvas"
          onmouseleave="exitPixelCanvas()"
          onmouseover="placePixel(event, false)"
          onmousemove="getPixelPlacePos(event)"
          height="2560" width="2560"
          style="background-color: black; width: 100%; height: 100%;"></canvas>
    </div>

<div class="sidebar-card"
     style="position: absolute;
            display: block;
            width: 12vw;
            height: auto;
            left: calc(50vw - 37.5vh - 15vw);
            top: 50vh;
            transform: translateY(-55%);">
  <canvas onmousedown="selectColorPicker(event)"
              id="colorpickercanvas"
              height="2560" width="2560"
              style="background-color: white; width: calc(100% - 2px); height: calc(100% - 2px); border-style: solid; border-width: 1px; border-color: white;"></canvas>
      <div id="colorbox"
           style="margin-top: -0.4vw; margin-left: calc(100% - 0.4vw);  width: 0.25vw; height: 0.25vw; border-color: white; border-width: 1px; border-style: solid; position: absolute;"></div>
<canvas
  id="colorpickercanvas2"
  onmousedown="getHuePickerPos(event)"
  onmousemove="getHuePickerPos(event)"
  onmouseover="getHuePickerPos(event)"
  height="2560" width="2560"
  style="background-color: white; width: calc(100% - 2px); height: 1.6vw; margin-top: 4px;
         border-color: white; border-style: solid; border-width: 1px; cursor: ew-resize;"></canvas>      
        <div id="huebar"
             style="margin-top: -1.6vw; width: 0.1vw; height: 1.6vw; border-color: white; border-width: 1px; border-style: solid;
                    position: absolute; pointer-events: none;"></div>       <p style="color: #111; font-size: 1vw; margin-top: 6px;">Selected Color:</p>
      
      <div id="selectedcolor"
           style="width: calc(3vw - 2px); height: calc(1vw - 2px); background-color: black; margin-left: calc(100% - 3vw); margin-top: -2vw; border-width: 1px; border-style: solid; border-color: white;"></div>
      
      <p id="online" style="color: #111; font-size: 1vw;">Users Online: Loading...</p>

      <!-- Quick Colors block -->
<div class="panel-reset" style="margin-top:12px; color:#111;">
        <div style="font-weight:700; margin-bottom:8px; font-size:0.9vw;">Quick Colors</div>
        <div style="display:grid; grid-template-columns: repeat(4, 1fr); gap:6px;">
          <div title="#000000" style="width:22px;height:22px;border:1px solid #00000022;border-radius:4px;background:#000" onclick="WeColorUI.setColor('#000000')"></div>
          <div title="#FFFFFF" style="width:22px;height:22px;border:1px solid #00000022;border-radius:4px;background:#fff" onclick="WeColorUI.setColor('#FFFFFF')"></div>
          <div title="#FF0000" style="width:22px;height:22px;border:1px solid #00000022;border-radius:4px;background:#f00" onclick="WeColorUI.setColor('#FF0000')"></div>
          <div title="#00FF00" style="width:22px;height:22px;border:1px solid #00000022;border-radius:4px;background:#0f0" onclick="WeColorUI.setColor('#00FF00')"></div>
          <div title="#0000FF" style="width:22px;height:22px;border:1px solid #00000022;border-radius:4px;background:#00f" onclick="WeColorUI.setColor('#0000FF')"></div>
          <div title="#FFFF00" style="width:22px;height:22px;border:1px solid #00000022;border-radius:4px;background:#ff0" onclick="WeColorUI.setColor('#FFFF00')"></div>
          <div title="#FF00FF" style="width:22px;height:22px;border:1px solid #00000022;border-radius:4px;background:#f0f" onclick="WeColorUI.setColor('#FF00FF')"></div>
          <div title="#00FFFF" style="width:22px;height:22px;border:1px solid #00000022;border-radius:4px;background:#0ff" onclick="WeColorUI.setColor('#00FFFF')"></div>
        </div>
      </div>

<!-- Saved Colors block -->
<div class="panel-reset" style="margin-top:14px; color:#111;">
        <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:8px;">
          <div style="font-weight:700; font-size:0.9vw;">Saved Colors</div>
          <button onclick="WeColorUI.saveCurrentColor()" style="font-size:0.8vw; padding:4px 8px; background:#f6f6f6; color:#111; border:1px solid #d9d9d9; border-radius:6px; cursor:pointer;">Save current</button>
        </div>
        <div id="savedColors" style="display:grid; grid-template-columns: repeat(8, 1fr); gap:6px;"></div>
        <p style="margin:6px 0; font-size:0.8vw; color:#777;">Tip: right-click a swatch to delete</p>
      </div>

<!-- Zoom feature -->
<div id="zoomToolbar"
           style="color:#111; display:flex; align-items:center; gap:8px; font-size:0.9vw; margin-top:14px;
                  background:transparent; border:0; padding:0; white-space:nowrap;">
        <button id="zoomOut" style="padding:4px 8px; background:#f6f6f6; color:#111; border:1px solid #d9d9d9; border-radius:6px; cursor:pointer;">âˆ’</button>
        <span id="zoomLabel">100%</span>
        <button id="zoomIn"  style="padding:4px 8px; background:#f6f6f6; color:#111; border:1px solid #d9d9d9; border-radius:6px; cursor:pointer;">+</button>
        <button id="resetView" style="padding:4px 8px; background:#f6f6f6; color:#111; border:1px solid #d9d9d9; border-radius:6px; cursor:pointer;">Reset</button>
    </div>

<!-- Right-side Top Contributors panel -->
<div class="sidebar-card"
     style="position: absolute;
            display: block;
            width: 14vw;
            height: auto;
            left: calc(50vw + 37.5vh + 3vw);
            top: 50%;
            transform: translateY(-50%);">
  <div style="font-weight:700; font-size:1vw; margin-bottom:6px;">
    Top Contributors
  </div>

  <p style="margin:0 0 8px 0; font-size:0.8vw; color:#777;">
    Ranked by total pixels placed
  </p>

  <ul id="topContributorsList"
      style="list-style:none;
             padding:0;
             margin:0;
             font-size:0.85vw;
             line-height:1.6;">
  </ul>
</div>

<!-- Login / Register modal -->
<div id="loginModal"
     style="position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.15);
            z-index: 1000;">

  <div class="sidebar-card"
       style="width: 260px;
              max-width: 90%;
              font-family: 'Poppins', sans-serif;">
    
    <div style="font-weight:600; font-size:16px; margin-bottom:6px;">
      Welcome to WeColor
    </div>
    <p style="font-size:12px; color:#555; margin-bottom:10px;">
      Create an account to track your pixels and appear on the Top Contributors board.
    </p>

    <!-- Login form -->
    <form id="loginForm" style="display:block; margin-bottom:8px;">
      <label for="loginUsername"
             style="display:block; font-size:12px; margin-bottom:2px;">Username</label>
      <input id="loginUsername"
             type="text"
             required
             style="width:100%; padding:6px 8px; margin-bottom:6px;
                    border-radius:6px; border:1px solid #d9d9d9; font-size:12px;">

      <label for="loginPassword"
              style="display:block; font-size:12px; margin-bottom:2px;">Password</label>
      <input id="loginPassword"
              type="password"
              required
              style="width:100%; padding:6px 8px; margin-bottom:8px;
                     border-radius:6px; border:1px solid #d9d9d9; font-size:12px;">

      <button type="submit"
              style="width:100%; padding:6px 8px;
                     border-radius:6px; border:none;
                     background:#457B9D; color:white;
                     font-size:13px; cursor:pointer;">
        Log in
      </button>
    </form>

    <div id="loginError"
         style="color:#c0392b; font-size:11px; min-height:14px; margin-bottom:4px;"></div>

    <div style="font-size:11px; text-align:center; margin-bottom:6px;">
      New here?
      <button type="button"
              id="showRegister"
              style="border:none; background:none; color:#457B9D; cursor:pointer; padding:0;">
        Create an account
      </button>
    </div>

    <!-- Register form -->
    <form id="registerForm" style="display:none; margin-top:6px; margin-bottom:6px;">
      <label for="registerUsername"
             style="display:block; font-size:12px; margin-bottom:2px;">Username</label>
      <input id="registerUsername"
             type="text"
             required
             style="width:100%; padding:6px 8px; margin-bottom:6px;
                    border-radius:6px; border:1px solid #d9d9d9; font-size:12px;">

      <label for="registerPassword"
             style="display:block; font-size:12px; margin-bottom:2px;">Choose a password</label>
      <input id="registerPassword"
             type="password"
             required
             style="width:100%; padding:6px 8px; margin-bottom:8px;
                    border-radius:6px; border:1px solid #d9d9d9; font-size:12px;">


      <button type="submit"
              style="width:100%; padding:6px 8px;
                     border-radius:6px; border:none;
                     background:#2A9D8F; color:white;
                     font-size:13px; cursor:pointer;">
        Create account
      </button>
    </form>

    <div id="registerError"
         style="color:#c0392b; font-size:11px; min-height:14px;"></div>

    <div style="font-size:11px; text-align:center; margin-top:6px;">
      Already registered?
      <button type="button"
              id="showLogin"
              style="border:none; background:none; color:#457B9D; cursor:pointer; padding:0;">
        Log in
      </button>
    </div>

  </div>
</div>

<script src="index.js"></script>
<script src="ui.js"></script>
<script>
  if (window.WeColorUI) { WeColorUI.initUI(); }
</script>
</body>
</html>